# litgen integration tests

This folder contains a full suite of integration tests for litgen.

## List of tests and documentation

The different tests are available at:

- [mylib/include/mylib/](mylib/include/mylib): header files with contains the C++ test code
- [tests/](tests/): corresponding python test code that will run and test the python module generated
  from those C++ files.

It is advised to read the different header files inside [mylib/include/mylib/](mylib/include/mylib), since they
are thouroughly commmented and can help understand litgen.


## pip package structure

This folder is actually capable of producing a pip package named `lg-mylib`:
````bash
pip install [-e] .
````

It structure is based on [lg_skbuild_template](https://github.com/pthom/lg_skbuild_template)

Below is a summary of the structure:

````
./
├── pyproject.toml                            # Pip configuration file
├── setup.py                                  # Pip configuration file
├── CMakeLists.txt                            # CMakeLists (used also by pip, via skbuild)
├── requirements-dev.txt
├── Readme.md                                 # this file
├── _skbuild/                                 # temp build directory when building via pip
├── autogenerate_mylib.py                     # This script will read headers in mylib/include and
│                                             # generate bindings inside:
│                                             #    - bindings/pybind_mylib.cpp (C++ publishing code)
│                                             #    - bindings/lg_mylib/__init__.pyi (stubs)
├── bindings/
│         ├── lg_mylib/
│         │         ├── __init__.py
│         │         ├── __init__.pyi          # file generated by litgen
│         │         └── py.typed
│         ├── module.cpp
│         ├── mylib_boxed_types.h             # file generated by litgen
│         └── pybind_mylib.cpp                # file generated by litgen
├── external/
│         └── pybind11/                       # pybind11 is a submodule
├── lg_cmake_utils/                           # lg_cmake_utils is a submodule that contains utilities
│         ├── lg_add_imgui_target.cmake       # that make it easier to write cmake code for Pip modules
│         ├── ...
├── mylib/                                    # mylib/:
│         ├── CMakeLists.txt                  # contains the C++ library that will be wrapped in a python module
│         ├── include/
│         │         └── mylib/
│         │         ├── api_marker.h
│         │         ├── basic_test.h          # This is a list of different C++ tests
│         │         ├── c_string_list_test.h  # Each of this file is documented, and should
│         │         ├── ...                   # help understand litgen better
│         └── src/
│             └── mylib.cpp
├── mylib_amalgamation/
│         └── mylib_amalgamation.h            # Optional amalgamated header for mylib/
└── tests/
    ├── basic_test.py                         # This is a list of python tests that will check
    ├── c_string_list_test.py                 # that the generated python module works as intended.
    ├── c_style_array_test.pys
````
